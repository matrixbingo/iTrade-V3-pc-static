<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

# debug

1.  页面开启
2.  页面隐藏
3.  桥协议可用

# core

## HBNBVersion

获取桥协议版本

支持版本

-   iHotel/6.1+
-   HBNB/?

**Examples**

```javascript
hbnb.core.HBNBVersion()
     .then(function(version) {
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;version>** 

## supportApis

获取桥协议版本

支持版本

-   iHotel/6.1+
-   HBNB/?

**Examples**

```javascript
hbnb.core.supportApis([
     'magpie://ui/alert',
     'magpie://what/the_f**k'
 ])
     .then(function(status) {
         status = [
             true,
             false
         ]
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)>** 

## OS

获取桥协议版本

支持版本

-   iHotel/6.1+
-   HBNB/?

**Examples**

```javascript
hbnb.core.OSVersion()
     .then(function(version) {
         version = {
             os: 'ios',
             version: '9.0'
         }
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;version>** 

# account

## login

打开客户端登录界面

1.  客户端不会判断是否已经登录。
    需要业务方自己调用 `hbnb.account.getUser` 判断是否已经登录。
2.  用户没有登录直接返回时，客户端不会给出通知。
    需要业务方自己监听 `HBNB:pageshow` 事件。

支持版本

-   iHotel/5.8

**Examples**

```javascript
hbnb.account.login()
     .then(function(user) {
         user = {
             userId: 1234567,
             userName: 'name is string',
             userToken: 'token is string'
         }
     })
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;user>** resolve if login success

## getUser

获取用户登录信息

用户已登录时 resolve，用户未登录 reject

支持版本

-   iHotel/5.8+

**Examples**

```javascript
hbnb.account.getUser()
     .then(function(user) {
         user = {
             userId: 1234567,
             userName: 'name is string',
             userToken: 'token is string'
         }
     })
     .catch(function(err) {
         err = {
             message: "用户未登录美团",
             status: -1
         }
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;(user | err)>** 

## mobileLogin

打开客户端登录界面

客户端不会判断是否已经登录。
需要业务方自己调用 `hbnb.account.getUser` 判断是否已经登录。

支持版本

-   iHotel/6.2

**Parameters**

-   `mobile`  
-   `code`  

**Examples**

```javascript
hbnb.account.mobileLogin(19988887777, 123456)
     .then(function(user) {
         user = {
             userId: 1234567,
             userName: 'name is string',
             userToken: 'token is string'
         }
     })
     .catch(function(err) {
     })
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;user>** resolve if login success

## sendMobileLoginCode

支持版本

-   iHotel/6.2

**Parameters**

-   `mobile` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 手机号

**Examples**

```javascript
hbnb.account.sendMobileLoginCode('19988887777')
     .then(function() {
     })
     .catch(function() {
     })
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;user>** resolve if login success

# log

## mge

发送 mge 统计参数

支持版本

-   iHotel/5.8+

**Parameters**

-   `cid` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined))** 页面名
-   `act` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined))** 事件名
-   `val` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined))** 页面属性
-   `lab` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined))** 事件属性

**Examples**

```javascript
hbnb.log.mge('页面A', '点击事件B');
 hbnb.log.mge({
     cid: '页面A‘，
     act: '点击事件B'
 });
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

# network

## request

发起网络请求

**Parameters**

-   `opts` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 请求参数，参考 [request](https://github.com/request/request#requestoptions-callback)

**Examples**

```javascript
hbnb.network.request({
     url: 'https://www.google.com/',
     method: 'GET',
     headers: {
         'X-Requested-With': 'XMLHttpRequest'
     },
     body: '',
     followRedirect: true,
     maxRedirects: 10,
     timeout: 5000
 }).then(function(resp) {
     resp = {
         statusCode: 404,
         body: '',
         headers: {
             'content-encoding': ['gzip']
         }
     }
 }).catch(function(err) {
     err = {
         message: "用户未登录美团",
         status: -1
     }
 });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;(resp | err)>** 

## sendSms

发送预填充内容了的短信

支持版本

-   iHotel/6.6

**Examples**

```javascript
hbnb.network.sendSms({
     "recipients": 110, // 电话号码，支持多个
     "text": "help" // 发送到的文字内容
 })
```

# pay

## payment

调用客户端收银台

支持版本

-   iHotel/5.8+

**Parameters**

-   `opts` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 收银台参数

**Examples**

```javascript
hbnb.pay.payment({
     tradeNo: '123',
     payToken: '456',
     orderId: '789',
     returnURL: 'imeituan://...'
 }).then(function(data) {
     data = {
         isPayed: true,
         orderId: '789'
     }
 }).catch(function() {
     ...
 });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;(orderId | [Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined))>** 

## getFingerprint

调用客户端收银台

支持版本

-   iHotel/6.1+

**Examples**

```javascript
hbnb.pay.getFingerprint()
     .then(function(fp) {
         fp = 'xxxxxxx'
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)>** 

# position

## getCity

获取当前选择的城市

支持版本

-   iHotel/5.8+

**Examples**

```javascript
hbnb.position.getCity()
     .then(function(city) {
         city = {
             cityId: 1,
             cityName: '北京'
             cityPinyin: 'beijing'
         }
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;city>** 

# storage

## getItem

客户端存储／查

支持版本

-   iHotel/5.8+

**Examples**

```javascript
hbnb.storage.getItem('key')
     .then(function(value) {
         value = '' || null;
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;val>** 

## setItem

客户端存储／增、改

客户端调用是异步的，不保证接下去调用 `hbnb.storage.getItem` 能立刻获取最新值

支持版本

-   iHotel/5.8+

**Examples**

```javascript
hbnb.storage.setItem('key', 'value');
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## removeItem

客户端存储／删

客户端调用是异步的，不保证接下去调用 `hbnb.storage.getItem` 能立刻获取最新值

支持版本

-   iHotel/5.8+

**Examples**

```javascript
hbnb.storage.removeItem('key');
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## setResult

适用的场景是native打开H5的页面选择学校、城市

支持版本

-   Android
-   iHotel/6.9+

**Parameters**

-   `obj` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

**Examples**

```javascript
hbnb.storage.setResult({id: "45", name: "广西"});
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

# thirdApps

## installed

检查第三方软件安装情况

目前支持支付宝（`alipay`）

支持版本

-   iHotel/5.8+

**Parameters**

-   `appName` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 软件名

**Examples**

```javascript
var hbnb = request('@hfe/hbnb');
 hbnb.thirdApps.installed('alipay')
     .then(function(status) {
         status = true || false
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[status](https://developer.mozilla.org/en-US/docs/Web/API/Window/status)>** 

# ui

## loadingStart

开启加载动画

在关闭前多次调用存在 bug，需要业务方自己把握开启／关闭的配对关系

支持版本

-   iHotel/5.8+

**Examples**

```javascript
hbnb.ui.loadingStart();
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## loadingStop

关闭加载动画

支持版本

-   iHotel/5.8+

**Examples**

```javascript
hbnb.ui.loadingStop();
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## toast

toast 弹窗

支持版本

-   iHotel/5.8+

**Parameters**

-   `message` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 弹窗信息
-   `time` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** toast 持续时间，单位 `ms`，可选，默认 3000

**Examples**

```javascript
hbnb.ui.toast('message', 1000);
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## alert

单按钮弹窗，类似 alert

支持版本

-   iHotel/5.8+

**Parameters**

-   `message` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 弹窗信息
-   `title` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** 弹窗标题，可选
-   `button` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** 按钮

**Examples**

```javascript
hbnb.ui.alert('message', ['title'], [{
     label: '确定',
     callback: function() {
         console.log('clicked');
     }
 }]);
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## confirm

双按钮弹窗，类似 confirm

支持版本

-   iHotel/5.8+

**Parameters**

-   `message` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 弹窗信息
-   `title` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** 弹窗标题，可选
-   `leftButton` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 左按钮
-   `rightButton` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 右按钮

**Examples**

```javascript
hbnb.ui.confirm('message', 'title', {
     label: '确定',
     callback: function() {}
 }, {
     label: '取消',
     callback: function() {}
 });
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## options

选项弹窗

支持版本

-   iHotel/5.8+

**Parameters**

-   `menus` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** 选项数组
-   `cancel` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 取消按钮

**Examples**

```javascript
hbnb.ui.options([{
     label: 'option1',
     callback: function() {}
 }, {
     label: 'option2',
     callback: function() {}
 }], {
     label: 'cancel',
     callback: function() {}
 });
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## singleSelect

单选框

支持版本

-   iHotel/5.8+

**Parameters**

-   `menus` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** 选项数组

**Examples**

```javascript
hbnb.ui.singleSelect([{
     label: 'all',
     active: true,
     callback: function() {},
 }, {
     label: 'option 1',
     active: false,
     callback: function() {},
 }, {
     label: 'option 2',
     active: false,
     callback: function() {},
 }]);
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## selectDate

日期选择

TODO: 补全示例

支持版本

-   iHotel/5.9.2+

**Parameters**

-   `current` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 当前日期
-   `maxDate` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 最大可选日期
-   `minDate` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 最小可选日期

**Examples**

```javascript
hbnb.ui.selectDate('');
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;([date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date) | err)>** 

## autoLock

不允许自动锁屏

支持版本

-   iHotel/6.5+

**Parameters**

-   `enable` **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** true表示禁止自动锁屏

**Examples**

```javascript
hbnb.ui.autoLock();
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

# webview

## open

打开新页面

与 `hbnb.webivew.close` 配合使用

支持版本

-   iHotel/5.8+

**Parameters**

-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 页面地址

**Examples**

```javascript
hbnb.webview.open('http://i.meituan.com');
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## back

后退

TODO: ANDROID 旧版实现有问题

支持版本

-   iHotel/?

**Examples**

```javascript
hbnb.webview.back();
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## close

关闭当前 webview

与 `hbnb.webivew.open` 配合使用

TODO: ANDROID 旧版实现有问题

支持版本

-   iHotel/?

**Examples**

```javascript
hbnb.webview.close();
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## closeAll

适用的场景是抢票任务编辑，从任务列表不想回表单.
ABCBC，在C页面closeAll([B, C])就退到页面A

与 `hbnb.webview.open` 配合使用

支持版本

-   Android
-   iHotel/6.5+

**Parameters**

-   `urls` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** 连续关闭的URL

**Examples**

```javascript
hbnb.webview.closeAll([
     '/qiangpiao/add/',
     '/qiangpiao/list/'
 ]);
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## modal

打开 modal 弹窗

1.  与 `hbnb.webivew.dismiss` 配合使用
2.  `modal` 弹窗内部不能继续调用 `modal` 弹窗，可以调用 `open`
3.  `dimiss` 时会关闭弹窗，且 modal 的操作不会纪录到后退路径中

支持版本

-   iHotel/5.8+

**Parameters**

-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 页面地址

**Examples**

```javascript
hbnb.webview.modal('http://i.meituan.com');
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## dismiss

关闭当前 modal

与 `hbnb.webivew.modal` 配合使用

支持版本

-   iHotel/5.8+

**Examples**

```javascript
hbnb.webview.dismiss();
```

## setTitle

修改标题

支持版本

-   iHotel/5.8+

**Parameters**

-   `title` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 标题

**Examples**

```javascript
hbnb.webview.setTitle('new title');
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## setMenus

设置导航栏右侧按钮

目前支持 `icon`/`text` 两种类型的按钮

支持版本

-   iHotel/5.8+

**Parameters**

-   `menus` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** 按钮设置

**Examples**

```javascript
hbnb.webview.setMenus([{
     type: 'text',
     text: '确定',
     color: '#cccccc',
     callback: function() {console.log('clicked'); return false;}
 }, {
     type: 'icon',
     icon: 'url',
     callback: function() {console.log('clicked'); return false;}
 ]);
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## setComplexTitle

设置复杂标题

根据传入的 `type` 判断使用那种展示形式。
如果当前版本不支持 `type`，会回退到普通形式，只展示 `title`。

目前只支持上下双栏的主副标题 `type='two-row'`

支持版本

-   iHotel/5.9.2+

**Parameters**

-   `opts` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 标题设置

**Examples**

```javascript
hbnb.webview.setComplexTitle({
     type: 'two-row',
     title: 'title',
     subTitle: 'subTitle'
 });
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## setBackAction

修改后退操作

一旦设置该函数，用户点击后退时只会调用该函数而不会直接后退。
可在函数内调用 `hbnb.webview.back` 方法进行后退

TODO: 支持版本

支持版本

-   iHotel/??

**Parameters**

-   `cb` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** 点击后退按钮时执行的函数

**Examples**

```javascript
hbnb.webview.setBackAction(function() {
     // do something
 });
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

# Tower

# getUuid

获取用户设备信息

目前主要用来获得UUID

支持版本

-   iTower/0.4+

**Examples**

```javascript
hbnb.tower.getUuid()
     .then(function(uuid) {
         uuid = {
             UUID: "xxxxxxxxx"
         };
     })
     .catch(function(err) {
         err = {
             status: -1
         };
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;([string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | err)>** 

# sendTopicCommentSuccess

专题评论成功通知

专题评论成功后，通知客户端，无返回数据

支持版本

-   iTower/0.4+

**Examples**

```javascript
hbnb.tower.commentCallback();
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;([string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | err)>** 

# comment

打开native评论输入界面

支持版本

-   MtLvxing/1.3+

**Parameters**

-   `opts` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

**Examples**

```javascript
hbnb.tower.comment({
         type: 'simple',
         placeholder: '请在此输入',
         content: '评论内容',
         limit: 350,
         buttonText: '发送',
     })
     .then(function(result) {
         result = {
             status: 0,
             content: '用户输入的内容',
         }
     })
     .catch(function(err) {
         err = {
             message: "fail",
             status: -1
         }
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;([object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | err)>** 

# shareConfig

Webview 页面分享功能

在App中将页面分享到微信、朋友圈、微博

支持版本

-   iTower/1.3+

**Parameters**

-   `name` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `opts` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

**Examples**

```javascript
hbnb.tower.shareConfig('weixin', {
     title: '页面名称',
     desc: '内容',
     imgUrl: 'http://xxx.jpg',
     link: 'http://www.com',
 }).then().catch();
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;([string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | err)>** 

# checkNickname

检查设置用户昵称

<http://wiki.sankuai.com/pages/viewpage.action?pageId=500753388>

支持版本

-   iTower/1.3+

**Examples**

```javascript
hbnb.tower.checkNickname();
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;([string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | err)>** 

# flight

## gotoAppHomepage

返回 app 首页

**Examples**

```javascript
hbnb.flight.gotoAppHomepage();
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## getFilter

机票筛选

TODO：补全参数

**Parameters**

-   `opts` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

**Examples**

```javascript
hbnb.flight.getFilters([
 ]).then(function(data) {
 });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## getLinkman

获取联系人

**Parameters**

-   `id` **int** 默认为 '',

**Examples**

```javascript
hbnb.flight.getLinkman('').then(function(data) {
    data = {
id: 'id is number',
        name: 'name is string',
        mobile: 'mobile is string',
        email: 'mobile is string',
    }
});
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## getExpress

获取邮寄地址

**Parameters**

-   `siteId` **siteId** ,
-   `id` **int** 默认为 '',

**Examples**

```javascript
hbnb.flight.getExpress(1, '').then(function(data) {
data = {
id: 'id is number',
name: 'name is string',
mobile: 'mobile is string',
province: 'province is string',
city: 'city is string',
district: 'district is string',
address: 'address is string',
postCode: 'postCode is string',
expressAmount: 'expressAmount is string'
}
});
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## selectCity

选择城市

**Parameters**

-   `city` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 

**Examples**

```javascript
hbnb.flight.selectCity('city')
     .then(function(city) {
         city = {
             cityName: '',
             cityPinyin: ''
         }
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## selectDate

选择日期

**Parameters**

-   `fromCity` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `toCity` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `months` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `original` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 

**Examples**

```javascript
hbnb.flight.selectDate(
     fromCity,
     toCity,
     months,
     original
 ).then(function(data) {
     console.log(data);
 });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## selectRoundDate

选择日期

**Examples**

```javascript
hbnb.flight.selectRoundDate().then(function(data) {
     console.log(data);
 });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## gotoOrderDetail

进入机票订单详情页面

点击后退时会返回订单列表页面，再后退会返回我的页面

**Parameters**

-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 订单页面地址
-   `orderListUrl` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 订单列表页面地址

**Examples**

```javascript
hbnb.flight.gotoOrderDetail(
     'url'
     'orderListUrl'
 );
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

# train

## gotoOrderDetail

进入火车票订单详情页面

点击后退时会返回订单列表页面，再后退会返回我的页面

支持版本

-   iHotel/5.8+

**Parameters**

-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 订单页面地址
-   `orderListUrl` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 订单列表页面地址

**Examples**

```javascript
hbnb.train.gotoOrderDetail(
     'url'
     'orderListUrl'
 );
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## selectDate

选择出行日期

TODO: 补全参数和返回值

支持版本

-   iHotel/5.8+

**Parameters**

-   `date` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 当前日期
-   `days` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** 日期 6.2
-   `tips` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 底部提示 6.2

**Examples**

```javascript
hbnb.train.selectDate('date', '60', '预售期为60天，60天外不可购买')
     .then(function(date) {
         date = '2015-02-02'
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)>** 

## selectStation

选择火车站

TODO: 补全参数和返回值

支持版本

-   iHotel/5.8+

**Parameters**

-   `stationCode` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 当前火车站
-   `stationType` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 类型

**Examples**

```javascript
hbnb.train.selectStation('code', 'type')
     .then(function(station) {
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;station>** 

## timeTable

展示列车时刻表

支持版本

-   iHotel/5.8+

**Parameters**

-   `stations` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

**Examples**

```javascript
hbnb.train.timeTable([{
     type: 'inside/outside/from/to',
     value: [
         'station_no',
         'station_name',
         'arrive_time',
         'start_time'
         'stopover_time'
     ]
 }]);
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## selectDateStudent

选择出行日期

支持版本

-   iHotel/5.8+

**Parameters**

-   `opts` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 选项

**Examples**

```javascript
hbnb.train.selectDateStudent({
     date: '2015-10-19',
     days: 60,
     range: [{
         start: '2015-10-20',
         finish: '2015-12-30'
     }],
     tips: '预售期为60天，60天外不可购买'
 })
     .then(function(date) {
         date = '2015-12-13'
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)>** 

## selectDateRush

选择出行日期

支持版本

-   iHotel/5.8+

**Parameters**

-   `opts` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 选项

**Examples**

```javascript
hbnb.train.selectDateRush({
     date: '2015-10-19',
     days: 60,
     buyRange: [{
         start: '2015-11-11',
         finish: '2015-12-11'
     }],
     reserveRange: [{
         start: '2015-12-12',
         finish: '2015-12-31'
     }]
 })
     .then(function(date) {
         date = '2015-12-13'
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)>** 

## timeRange

选择出行日期

**Parameters**

-   `start` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** 开始时间
-   `end` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** 结束时间

**Examples**

```javascript
hbnb.train.timeRange(12, 15)
     .then(function(range) {
         range = {
             start: 0,
             end: 24
         }
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)>** 

## gotoOrderList

**Parameters**

-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 订单列表地址

**Examples**

```javascript
hbnb.train.gotoOrderList('url');
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## multiSelect

**Parameters**

-   `menus` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** 菜单

**Examples**

```javascript
hbnb.train.multiSelect([{
     label: '',
     value: '',
     active: false
 }])
     .then(function(menus) {
         menus = [{
             label: '',
             value: '',
             active: false
         }]
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## selectTrains

**Parameters**

-   `menus` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** 菜单

**Examples**

```javascript
hbnb.train.selectTrains([{
     label: '',
     subLabel: '',
     description: ''
     value: '',
     active: false
 }])
     .then(function(menus) {
         menus = [{
             label: '',
             value: '',
             active: false
         }]
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## ringtone

**Parameters**

-   `loop` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** 时长

**Examples**

```javascript
hbnb.train.ringtone()
     .then(function() {});
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## vibrate

**Parameters**

-   `duration` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** 震动时长

**Examples**

```javascript
hbnb.train.vibrate(1000)
     .then(function() {});
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

# inject

## load

打开一个隐藏 webview

如果指定的 `name` 还不存在，会创建一个新的 webview。
如果指定的 `name` 存在，会在该 webview 上加载新的 url。
在加载页面所有静态资源请求都完成时，Promise resolve。
但是不保证页面已经可用，业务方可自己进行 domready 等检测。

支持版本

-   iHotel/5.8+

**Parameters**

-   `name` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 隐藏 webview 名
-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 需要加载的页面地址

**Examples**

```javascript
hbnb.inject.load(
     'name',
     'https://kyfw.12306.cn/otn/leftTicket/init'
 ).then(function() {
     console.log('loaded');
 });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## loadHTML

打开一个隐藏 webview

如果指定的 `name` 还不存在，会创建一个新的 webview。
在指定的 webview 中加载给定的 `html` 片段
在加载页面所有静态资源请求都完成时，Promise resolve。
但是不保证页面已经可用，业务方可自己进行 domready 等检测。

支持版本

-   iHotel/6.1+

**Parameters**

-   `name` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 隐藏 webview 名
-   `url` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 需要加载的页面地址
-   `html` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 需要加载的 html 片段

**Examples**

```javascript
hbnb.inject.loadHTML(
     'name',
     'https://kyfw.12306.cn/otn/',
     '<!DOCTYPE html><html><head><meta charset="utf-8" /></head><body></body></html>'
 ).then(function() {
     console.log('loaded');
 });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## close

关闭隐藏 webview

主要为了减小内存占用

支持版本

-   iHotel/5.8+

**Parameters**

-   `name` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 隐藏 webview 名

**Examples**

```javascript
hbnb.inject.close('name')
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## show

将隐藏 webview 放到前台

TODO: 验证下返回值

支持版本

-   iHotel/5.8+

**Parameters**

-   `name` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 隐藏 webview 名

**Examples**

```javascript
hbnb.inject.show('name');
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## runScript

向隐藏 webview 注入脚本

支持版本

-   iHotel/5.8+

**Parameters**

-   `name` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 隐藏 webview 名
-   `script` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 注入的脚本，必须为可执行函数
-   `param` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** script 的参数，即 `hbnb.inject.callback` 的 `funcName`

**Examples**

```javascript
hbnb.inject.runScript(
     'name',
     'script',
     'param'
 ).then(function() {
     console.log('loaded');
 });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## addStopUrl

匹配隐藏 webview 页面的 url

符合时，停止页面加载并执行脚本
只匹配一次？

TODO: 支持版本

支持版本

-   iHotel/5.9?

**Parameters**

-   `name` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 隐藏 webview 名
-   `pattern` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 用于匹配 url 的正则
-   `script` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 匹配后执行的命令

**Examples**

```javascript
hbnb.inject.addStopUrl('name', 'pattern', 'script')
     .then(function() {
         console.log('loaded');
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## callback

隐藏 webview 中使用该方法返回数据

支持版本

-   iHotel/5.8+

**Parameters**

-   `fnName` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 回调函数名
-   `data` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 返回的数据

**Examples**

```javascript
hbnb.inject.callback('funcName', 'data')
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

# travel

## selectCity

选择城市

支持版本

-   iTrip/6.9+

**Parameters**

-   `city` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 

**Examples**

```javascript
hbnb.travel.selectCity('city')
     .then(function(city) {
         city = {
             cityName: '',
             cityID: ''
         }
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## setGdata

设置客户端大G埋点

支持版本

-   iTrip/6.9+

**Parameters**

-   `bigG` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 

**Examples**

```javascript
hbnb.travel.setGdata('bigG')
     .then(function(bigG) {
         bigG = {
             status: 1          //0: 失败；1:成功
         }
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## getPosDeviceId

获取pos 设备id

**Examples**

```javascript
hbnb.travel.getPosDeviceId()
     .then(function(resp) {
         resp = {
             deviceid: "xxxxx"//如果返回deviceid为空，则表示不是pos机
         }
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## check_printer_state

打印状态

**Examples**

```javascript
hbnb.travel.printerState()
     .then(function(resp) {
         resp = {
             status:""//一共五种状态：OK,NO_PAPER（缺纸）,HIGH_TEMP（过热）,ERROR(过热且缺纸),UNKNOW(未知)
         }
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

## print

获取pos 设备id

**Parameters**

-   `content` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** 

**Examples**

```javascript
hbnb.travel.print([
   {
"content":"xxx",
"gravity":"left", //对齐 left/right/center
"textsize":"small" //字体大小  small/medium/large
}
 ])
     .then(function(resp) {
         resp = {
             status: 0,
             message: '成功'
         }
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

# env

## getPageEnv

获取当前页面变量

支持版本

-   iHotel/6.3

**Examples**

```javascript
hbnb.env.getPageEnv()
     .then(function(env) {
     });
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;version>** 

# share

## activeNavButton

share.activeNavButton 激活导航栏分享按钮

支持版本

-   iHotel/7.0+
    此版本不支持successCallback,failCallback 客户端说排期比较紧张，7.1版本实现, ios失败没有回调通知

**Parameters**

-   `channel` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** 渠道
-   `conf` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 配置信息

**Examples**

```javascript
hbnb.share.activeNavButton(['weixin','weibo','sinaWeibo'], {
content: '分享内容',
detailURL: 'http://i.meituan.com/',
imageURL: 'http://p1.meituan.net/codeman/799087624091d1d43768b7da396d4a122532.png',
title: '分享标题'
});
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## disableNavButton

share.disableNavButton 禁用导航栏分享按钮

支持版本

-   iHotel/7.0+

**Examples**

```javascript
hbnb.share.disableNavButton();
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 

## callLocal

share.callLocal 激活导航栏分享按钮

支持版本

-   iHotel/7.0+
    此版本不支持successCallback,failCallback 客户端说排期比较紧张，7.1版本实现

**Parameters**

-   `channel` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** 渠道
-   `conf` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 配置信息

**Examples**

```javascript
hbnb.share.callLocal(['weixin','weibo','sinaWeibo'], {
content: '分享内容',
detailURL: 'http://i.meituan.com/',
imageURL: 'http://p1.meituan.net/codeman/799087624091d1d43768b7da396d4a122532.png',
title: '分享标题'
});
```

Returns **[Undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)** 
